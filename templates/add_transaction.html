{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">Ajouter une transaction</h2>
<form method="post" class="card card-body shadow-sm">
  <div class="mb-3">
    <label for="sender" class="form-label">Expéditeur</label>
    <input type="text" class="form-control" id="sender" name="sender" required />
  </div>
  <div class="mb-3">
    <label for="recipient" class="form-label">Destinataire</label>
    <input type="text" class="form-control" id="recipient" name="recipient" required />
  </div>
  <div class="mb-3">
    <label for="amount" class="form-label">Montant</label>
    <input type="number" step="0.01" class="form-control" id="amount" name="amount" required />
  </div>
  <div class="mb-3">
    <label for="metadata" class="form-label">Métadonnées (optionnel)</label>
    <input type="text" class="form-control" id="metadata" name="metadata" placeholder="Commentaire, note…" />
  </div>
  <button type="submit" class="btn btn-primary">Ajouter la transaction</button>
</form>
{% endblock %}

{% block scripts %}
<script>
  document.querySelector('form').addEventListener('submit', function(e) {
    const sender = document.getElementById('sender');
    const recipient = document.getElementById('recipient');
    const amount = document.getElementById('amount');
    let valid = true;
    if (!sender.value.trim()) { sender.classList.add('is-invalid'); valid = false; }
    if (!recipient.value.trim()) { recipient.classList.add('is-invalid'); valid = false; }
    const value = parseFloat(amount.value);
    if (isNaN(value) || value <= 0) { amount.classList.add('is-invalid'); valid = false; }
    if (!valid) {
      e.preventDefault();
    }
  });
</script>
{% endblock %}